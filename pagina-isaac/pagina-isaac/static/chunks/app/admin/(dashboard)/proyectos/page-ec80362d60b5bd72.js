(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[585],{9480:function(e,t,a){Promise.resolve().then(a.bind(a,6679))},6679:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var r=a(7437),s=a(2265),n=a(495),o=a(4867),l=a(837),i=a(4379),c=a.n(i),d=e=>{let{project:t,isOpen:a,onClose:o}=e,[i,d]=(0,s.useState)(t.nombre),[u,m]=(0,s.useState)(null),[f,h]=(0,s.useState)(t.isActive),x=new FormData;console.log(t),(0,s.useEffect)(()=>{a&&t&&(d(t.nombre),m(null),h(t.isActive))},[a,t]);let p=async()=>{x.append("nombre",i),x.append("imagen",u),x.append("activo",f),x.append("id",t.id);try{let e=await fetch("/api/proyectos/editProject",{method:"PUT",body:x});if(!e.ok)throw Error("Error al actualizar el proyecto");let t=await e.json();console.log("Proyecto actualizado:",t),d(""),m(null),h(!1),c().fire({icon:"success",title:"Proyecto guardado",text:"El proyecto se ha guardado correctamente."}),o()}catch(e){console.error("Error en la llamada a la API:",e),c().fire({icon:"error",title:"Error",text:e.message})}};return(0,r.jsxs)(l.Vq,{open:a,onOpenChange:o,children:[(0,r.jsx)(l.t9,{className:"fixed inset-0 bg-black opacity-30"}),(0,r.jsxs)(l.cZ,{className:"fixed top-1/2 left-1/2 w-1/3 bg-white rounded-lg shadow-lg transform -translate-x-1/2 -translate-y-1/2",children:[(0,r.jsx)(l.$N,{className:"text-lg font-bold",children:"Editar Proyecto"}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("label",{className:"block mb-2",children:"Nombre:"}),(0,r.jsx)("input",{type:"text",value:i,onChange:e=>d(e.target.value),className:"border rounded p-2 w-full"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",htmlFor:"imagen",children:"Imagen"}),(0,r.jsx)("input",{type:"file",id:"imagen",accept:"image/*",onChange:e=>m(e.target.files[0]),className:"border border-gray-300 rounded w-full p-2",required:!0})]}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:f,onChange:e=>h(e.target.checked),className:"mr-2"}),"Activo"]})}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)(n.z,{onClick:p,className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Guardar Cambios"}),(0,r.jsx)(n.z,{onClick:o,className:"ml-2 bg-red-600 px-4 py-2 rounded",children:"Cancelar"})]})]})]})},u=e=>{let{isOpen:t,onClose:a}=e,[o,i]=(0,s.useState)(""),[d,u]=(0,s.useState)(null),[m,f]=(0,s.useState)(!0),h=async e=>{e.preventDefault();let t=new FormData;t.append("nombre",o.toString()),t.append("imagen",d),t.append("activo",m.toString()),console.log(t.get("imagen"));try{if((await fetch("/api/dashboard/proyectos",{method:"POST",body:t})).ok)c().fire({icon:"success",title:"Proyecto guardado",text:"El proyecto se ha guardado correctamente."}),i(""),u(null),f(!0),f(!1);else throw Error("Error al guardar el proyecto")}catch(e){c().fire({icon:"error",title:"Error",text:e.message})}a()};return(0,r.jsxs)(l.Vq,{open:t,onOpenChange:a,children:[(0,r.jsx)(l.t9,{}),(0,r.jsxs)(l.cZ,{className:"p-6",children:[(0,r.jsx)(l.$N,{className:"text-lg font-bold",children:"Nuevo Proyecto"}),(0,r.jsxs)("form",{onSubmit:h,className:"mt-4",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",htmlFor:"nombre",children:"Nombre del Proyecto"}),(0,r.jsx)("input",{type:"text",id:"nombre",value:o,onChange:e=>i(e.target.value),className:"border border-gray-300 rounded w-full p-2",required:!0})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",htmlFor:"imagen",children:"Imagen"}),(0,r.jsx)("input",{type:"file",id:"imagen",accept:"image/*",onChange:e=>u(e.target.files[0]),className:"border border-gray-300 rounded w-full p-2",required:!0})]}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:m,onChange:e=>f(e.target.checked),className:"mr-2"}),"Activo"]})}),(0,r.jsx)(n.z,{type:"submit",className:"bg-green-500 text-white",children:"Crear Proyecto"}),(0,r.jsx)(n.z,{type:"button",onClick:a,className:"bg-red-500 text-white ml-2",children:"Cancelar"})]})]})]})},m=a(6648);a(2651);var f=()=>{let[e,t]=(0,s.useState)(null),[a,l]=(0,s.useState)(!1),[i,c]=(0,s.useState)(!1),[f,h]=(0,s.useState)([]),x=async()=>{try{let e=await fetch("/api/dashboard/proyectos");if(!e.ok)throw Error("Error al obtener los proyectos");let t=await e.json();h(t)}catch(e){console.error(e)}};(0,s.useEffect)(()=>{x()},[]);let p=e=>{t(e),l(!0)};return(0,r.jsxs)("div",{className:"container mx-auto mt-5",children:[(0,r.jsx)("h1",{className:"text-xl font-bold mb-5 text-white text-center",children:"Proyectos"}),(0,r.jsx)(n.z,{onClick:()=>c(!0),className:"bg-blue-500 text-white",children:"Agregar Proyecto"}),(0,r.jsx)(u,{isOpen:i,onClose:()=>{c(!1),x()}}),(0,r.jsxs)("div",{className:"mt-5",children:[(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 animate__animated animate__fadeIn",children:f.map(e=>(0,r.jsxs)("div",{className:"bg-white border border-gray-300 rounded-lg shadow-md overflow-hidden transition-transform transform hover:scale-105 relative",children:[(0,r.jsx)(m.default,{src:e.imagenUrl,alt:e.nombre,width:300,height:300,className:"w-full h-32 object-cover"}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-xl mb-2",children:e.nombre}),(0,r.jsx)("p",{className:"text-sm ".concat(e.isActive?"text-green-500":"text-red-500"),children:e.isActive?"Activo":"Inactivo"}),(0,r.jsxs)("button",{onClick:()=>p(e),className:"mt-3 px-3 py-1 bg-yellow-500 text-white rounded inline-flex items-center",children:[(0,r.jsx)(o.JtS,{className:"mr-1"})," ","Editar"]})]})]},e.id))}),e&&(0,r.jsx)(d,{project:e,isOpen:a,onClose:()=>{l(!1),x()}})]})]})}},495:function(e,t,a){"use strict";a.d(t,{z:function(){return c}});var r=a(7437),s=a(2265),n=a(1538),o=a(2218),l=a(7440);let i=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:a,variant:s,size:o,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,r.jsx)(u,{className:(0,l.cn)(i({variant:s,size:o,className:a})),ref:t,...d})});c.displayName="Button"},837:function(e,t,a){"use strict";a.d(t,{$N:function(){return f},Be:function(){return h},Vq:function(){return i},cZ:function(){return m},hg:function(){return c},t9:function(){return u}});var r=a(7437),s=a(2265),n=a(3394),o=a(4867),l=a(7440);let i=n.fC,c=n.xz,d=n.h_;n.x8;let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.aV,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});u.displayName=n.aV.displayName;let m=s.forwardRef((e,t)=>{let{className:a,children:s,...i}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(u,{}),(0,r.jsxs)(n.VY,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...i,children:[s,(0,r.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(o.Pxu,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=n.VY.displayName;let f=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});f.displayName=n.Dx.displayName;let h=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...s})});h.displayName=n.dk.displayName},7440:function(e,t,a){"use strict";a.d(t,{cn:function(){return n}});var r=a(30),s=a(6164);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m6)((0,r.W)(t))}},2218:function(e,t,a){"use strict";a.d(t,{j:function(){return n}});let r=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,s=function(){for(var e,t,a=0,r="";a<arguments.length;)(e=arguments[a++])&&(t=function e(t){var a,r,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t){if(Array.isArray(t))for(a=0;a<t.length;a++)t[a]&&(r=e(t[a]))&&(s&&(s+=" "),s+=r);else for(a in t)t[a]&&(s&&(s+=" "),s+=a)}return s}(e))&&(r&&(r+=" "),r+=t);return r},n=(e,t)=>a=>{var n;if((null==t?void 0:t.variants)==null)return s(e,null==a?void 0:a.class,null==a?void 0:a.className);let{variants:o,defaultVariants:l}=t,i=Object.keys(o).map(e=>{let t=null==a?void 0:a[e],s=null==l?void 0:l[e];if(null===t)return null;let n=r(t)||r(s);return o[e][n]}),c=a&&Object.entries(a).reduce((e,t)=>{let[a,r]=t;return void 0===r||(e[a]=r),e},{});return s(e,i,null==t?void 0:null===(n=t.compoundVariants)||void 0===n?void 0:n.reduce((e,t)=>{let{class:a,className:r,...s}=t;return Object.entries(s).every(e=>{let[t,a]=e;return Array.isArray(a)?a.includes({...l,...c}[t]):({...l,...c})[t]===a})?[...e,a,r]:e},[]),null==a?void 0:a.class,null==a?void 0:a.className)}}},function(e){e.O(0,[433,461,310,648,603,394,971,23,744],function(){return e(e.s=9480)}),_N_E=e.O()}]);